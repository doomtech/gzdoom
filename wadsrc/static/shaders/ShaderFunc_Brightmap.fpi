uniform sampler2D texture2;

vec4 ProcessPixel()
{
	vec4 texel = texture2D(tex, gl_TexCoord[0].st);
	vec4 brightpix = texture2D(texture2, gl_TexCoord[0].st);
	vec4 light = GetPixelLight();
	light = min (light + Desaturate(brightpix), 1.0);
	return ApplyPixelFog(Desaturate(texel) * light);
}
